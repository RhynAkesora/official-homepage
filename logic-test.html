<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>論理的思考力診断ゲーム | Rhyn.jp</title>
<meta name="description" content="知識不要・地頭力のみで挑む論理的思考力診断。直感の罠を抜け出し、科学的な思考力を測定します。">

<!-- OGP Configuration -->
<meta property="og:title" content="論理的思考力診断ゲーム" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://rhyn.jp/logic-test.html" />
<meta property="og:description" content="知識は一切不要。あなたの純粋な論理処理能力をS〜Cランクで測定します。" />
<meta property="og:site_name" content="Rhyn.jp" />
<meta name="twitter:card" content="summary_large_image" />

<style>
  :root {
    --bg-color: #050505; /* Deep Black */
    --card-bg: #141414;
    --text-main: #ffffff;
    --text-sub: #cccccc;
    --accent-primary: #2979ff; /* VIVID ELECTRIC BLUE */
    --accent-glow: rgba(41, 121, 255, 0.4);
    --accent-success: #00e676;
    --accent-danger: #ff1744;
    --btn-bg: #1f1f1f;
    --btn-border: #444444;
    --border-radius: 12px;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-main);
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    -webkit-tap-highlight-color: transparent;
  }

  .container {
    max-width: 640px;
    width: 90%;
    margin: 20px auto;
    position: relative;
    z-index: 10;
    padding-bottom: 60px;
  }

  /* Views */
  .view {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .view.active {
    display: block;
    opacity: 1;
    animation: fadeIn 0.4s ease forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Card Component */
  .card {
    background-color: var(--card-bg);
    border-radius: var(--border-radius);
    padding: 24px 20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.8);
    border: 1px solid #333;
    position: relative;
    z-index: 20;
  }

  h1 {
    font-size: 20px;
    margin-bottom: 24px;
    color: var(--text-main);
    text-align: center;
    font-weight: 700;
    letter-spacing: 0.05em;
    line-height: 1.4;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
  }

  p {
    font-size: 15px;
    line-height: 1.7;
    color: var(--text-sub);
    margin-bottom: 30px;
  }

  /* Standard Option Buttons */
  .btn {
    display: block;
    width: 100%;
    padding: 18px;
    margin-bottom: 14px;
    background-color: var(--btn-bg);
    color: var(--text-main);
    border: 1px solid var(--btn-border);
    border-radius: var(--border-radius);
    font-size: 16px;
    cursor: pointer;
    text-align: left;
    transition: all 0.2s;
    text-decoration: none;
    box-sizing: border-box;
    position: relative;
    z-index: 100;
    pointer-events: auto !important;
    font-weight: 500;
  }

  .btn:active {
    transform: scale(0.98);
    background-color: #333;
    border-color: var(--accent-primary);
  }

  @media (hover: hover) {
    .btn:hover:not(.disabled) {
      background-color: #2a2a2a;
      border-color: var(--accent-primary);
      box-shadow: 0 0 15px var(--accent-glow);
    }
  }

  .btn.selected {
    background-color: rgba(41, 121, 255, 0.2);
    border-color: var(--accent-primary);
    color: #fff;
    box-shadow: 0 0 20px var(--accent-glow);
    font-weight: 700;
  }
  
  .btn.disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  /* Primary Action Button (Start / Next) */
  .btn-primary {
    background: linear-gradient(135deg, #2979ff, #00b0ff);
    color: #ffffff;
    border: none;
    text-align: center;
    font-weight: 800;
    margin-top: 24px;
    z-index: 101;
    font-size: 16px;
    box-shadow: 0 4px 20px rgba(41, 121, 255, 0.5);
    letter-spacing: 0.05em;
  }

  .btn-primary:active {
    transform: scale(0.97);
    box-shadow: 0 2px 10px rgba(41, 121, 255, 0.4);
  }

  /* Share Button (X) - PURE WHITE TEXT */
  .btn-share {
    background-color: #000000;
    color: #ffffff !important; /* Force Pure White */
    border: 2px solid var(--accent-primary);
    text-align: center;
    font-weight: 700;
    margin-top: 32px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    z-index: 102;
    box-shadow: 0 0 15px var(--accent-glow);
    text-decoration: none; /* No underline */
  }
  
  .btn-share:hover {
    background-color: #111;
    color: #ffffff !important;
    box-shadow: 0 0 25px var(--accent-glow);
  }

  .btn-share:active {
    transform: scale(0.97);
  }

  /* Home Button - PURE WHITE TEXT & BORDER */
  .btn-home {
    background-color: transparent;
    color: #ffffff !important; /* Force Pure White */
    border: 2px solid #ffffff; /* White Border */
    text-align: center;
    font-weight: 700;
    margin-top: 20px;
    font-size: 15px;
    cursor: pointer;
    z-index: 103;
    padding: 16px;
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
    text-decoration: none; /* No underline */
  }

  .btn-home:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff !important;
    border-color: #ffffff;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
  }

  .btn-home:active {
    transform: scale(0.97);
  }

  .x-icon {
    width: 18px;
    height: 18px;
    fill: #ffffff; /* Pure White Icon */
  }

  /* Progress Bar */
  .progress-container {
    height: 6px;
    background-color: #333;
    width: 100%;
    margin-bottom: 24px;
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    background-color: var(--accent-primary);
    width: 0%;
    transition: width 0.3s ease;
    box-shadow: 0 0 10px var(--accent-primary); /* Glowing Bar */
  }

  /* Text Styles */
  .question-meta {
    font-size: 14px;
    color: var(--accent-primary);
    margin-bottom: 12px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    text-shadow: 0 0 10px var(--accent-glow);
  }

  .question-text {
    font-size: 19px;
    font-weight: 700;
    line-height: 1.6;
    margin-bottom: 32px;
    white-space: pre-wrap;
    min-height: 60px;
  }

  .fade-wrapper { transition: opacity 0.2s ease; }
  .fading-out { opacity: 0; }

  /* Result Screen */
  .result-header {
    text-align: center;
    margin-bottom: 30px;
  }

  .score-display {
    font-size: 64px;
    font-weight: 900;
    color: #ffffff;
    margin: 8px 0;
    line-height: 1;
    text-shadow: 0 0 20px var(--accent-glow);
  }

  .rank-display {
    font-size: 24px;
    color: var(--accent-primary);
    font-weight: 800;
    margin-bottom: 8px;
    letter-spacing: 0.05em;
  }

  .feedback-text {
    text-align: left;
    font-size: 15px;
    color: #e0e0e0;
    line-height: 1.7;
    margin-bottom: 20px;
    background: #1a1a1a;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #444;
  }

  /* Review Section */
  .review-section {
    border-top: 1px solid #333;
    padding-top: 32px;
    margin-top: 40px;
  }

  .review-title {
    font-size: 16px;
    color: var(--text-main);
    margin-bottom: 16px;
    font-weight: 700;
  }

  .review-item {
    background-color: #1a1a1a;
    border-radius: var(--border-radius);
    padding: 16px;
    margin-bottom: 16px;
    border-left: 4px solid transparent;
  }

  .review-item.correct { border-left-color: var(--accent-success); }
  .review-item.incorrect { border-left-color: var(--accent-danger); }

  .review-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-size: 13px;
    font-weight: 700;
  }

  .status-label.correct { color: var(--accent-success); }
  .status-label.incorrect { color: var(--accent-danger); }

  .review-q { font-size: 15px; margin-bottom: 10px; color: var(--text-main); font-weight: 700; }
  .review-exp { font-size: 14px; color: var(--text-sub); line-height: 1.6; }

</style>
</head>
<body>

<div class="container">

  <!-- Intro Screen -->
  <div id="view-intro" class="view active">
    <div class="card">
      <h1>論理的思考力診断ゲーム</h1>
      <p>
        あなたの思考の「切れ味」を試してみましょう。<br><br>
        難しい知識は一切不要。パズルのように、目の前の情報だけを使って論理的に正しい答えを導き出してください。<br><br>
        直感や思い込み（バイアス）、悪質なレトリックの罠を回避し、純粋な思考力を測定します。
      </p>
      <div style="font-size: 13px; color: var(--text-sub); margin-bottom: 24px; padding: 16px; background: #1a1a1a; border-radius: 8px; border: 1px solid #333;">
        ・出題：ランダムに5問（全100問から抽出）<br>
        ・時間：無制限
      </div>
      <button id="btn-start" class="btn btn-primary">診断をスタート</button>
    </div>
  </div>

  <!-- Quiz Screen -->
  <div id="view-quiz" class="view">
    <div class="card">
      <div class="progress-container"><div id="progress-bar" class="progress-bar"></div></div>
      
      <div id="quiz-content" class="fade-wrapper">
        <div id="question-meta">Q1</div>
        <div id="question-text" class="question-text">Loading...</div>
        <div id="options-container"></div>
      </div>
    </div>
  </div>

  <!-- Result Screen -->
  <div id="view-result" class="view">
    <div class="card">
      <div class="result-header">
        <div style="font-size: 13px; color: var(--text-sub); margin-bottom: 8px; font-weight: bold; letter-spacing: 0.1em;">DIAGNOSIS RESULT</div>
        <div id="score-display" class="score-display">0/5</div>
        <div id="rank-display" class="rank-display">-</div>
      </div>

      <div id="feedback-text" class="feedback-text"></div>

      <!-- X Share Button -->
      <a id="share-link" href="#" target="_blank" class="btn btn-share">
        <svg class="x-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
        </svg>
        結果をXでシェア
      </a>

      <button id="btn-restart" class="btn btn-primary">別の問題に挑戦する</button>

      <!-- Home Link -->
      <a href="https://rhyn.jp/" target="_blank" rel="noopener noreferrer" class="btn btn-home">
        Rhyn.jp (トップページ) へ戻る
      </a>

      <div class="review-section">
        <div class="review-title">解説と振り返り</div>
        <div id="review-list"></div>
      </div>
    </div>
  </div>

</div>

<script>
(function() {
  // --- 100 Questions Pool (v19 Extended) ---
  const questionPool = [
    // === カテゴリ：論理パズル・推論 ===
    {
      q: "「雨が降れば、必ず地面が濡れる」ことが分かっています。\nいま、「地面が濡れていない」としたら、確実に言えることは？",
      options: ["雨は降っていない。", "雨が降っている。", "誰かが拭いた。", "何も分からない。"],
      correct: 0,
      explanation: "対偶の論理です。「AならB」が真なら、「BでないならAでない」も必ず真になります。"
    },
    {
      q: "ある村の住人は「正直者」か「嘘つき」のどちらかです。\n住人Aが「私は嘘つきだ」と言いました。\n論理的に考えて、Aの正体は？",
      options: ["正直者", "嘘つき", "正直者でも嘘つきでもない（あり得ない）", "正直者だがふざけている"],
      correct: 2,
      explanation: "正直者なら嘘は言わず、嘘つきなら本当のこと（自分は嘘つき）を言いません。自己言及のパラドックスです。"
    },
    {
      q: "3つの箱があり、1つだけに当たりが入っています。\n「この箱には当たりが入っている」と書かれた箱を開けたら、ハズレでした。\nこの箱に書かれていたことは嘘だったことになります。では、当たりはどこにある？",
      options: ["この箱の中", "残りの2つの箱のどちらか", "どこにもない", "分からない"],
      correct: 1,
      explanation: "「ここにある」が嘘なので、ここにはありません。消去法で残りになります。"
    },
    {
      q: "「全てのカラスは黒い」という説が間違っていることを証明するために、見つけるべきものは？",
      options: ["黒いカラスを1羽", "黒くないカラスを1羽", "黒くない白鳥を1羽", "全てのカラスを捕まえる"],
      correct: 1,
      explanation: "たった1羽の例外（黒くないカラス）が見つかれば、全称命題は否定されます（反証）。"
    },
    {
      q: "Aさんは「私はBさんよりも背が高い」と言い、Bさんは「私はCさんよりも背が高い」と言っています。\nこの時、一番背が高いのは誰？",
      options: ["Aさん", "Bさん", "Cさん", "全員同じ"],
      correct: 0,
      explanation: "推移律です。A > B かつ B > C なので、A > C となります。"
    },
    {
      q: "ある部屋にいる全員が「眼鏡をかけている」とします。\nそこへ眼鏡をかけた人がもう一人入ってきました。\nこの時、部屋にいる「眼鏡をかけていない人」の人数は？",
      options: ["1人", "0人", "増える", "分からない"],
      correct: 1,
      explanation: "全員かけている状態に、かけている人が加わっても、かけていない人は0人のままです。"
    },
    {
      q: "「昨日は明日だった」と言えるのは、いつ？",
      options: ["今日", "昨日", "明日", "そんな日は来ない"],
      correct: 0,
      explanation: "今日は「昨日の明日」です。"
    },
    {
      q: "Aの親はBですが、BはAの父親ではありません。\nBはAの何？",
      options: ["祖父", "母親", "兄", "他人"],
      correct: 1,
      explanation: "親は父か母です。父でないなら母です。"
    },
    {
      q: "マラソンで2位の人を追い抜きました。\nいま、あなたは何位？",
      options: ["1位", "2位", "3位", "分からない"],
      correct: 1,
      explanation: "2位の人を抜くと、あなたがその位置（2位）に入ります。"
    },
    {
      q: "「この文は間違いである」\nこの文が正しいと仮定すると、どうなる？",
      options: ["文は正しいことになる。", "文は間違いということになる。", "意味が通じない。", "何も起きない。"],
      correct: 1,
      explanation: "自己言及のパラドックスです。正しいと仮定すると、内容は「間違い」なので矛盾します。"
    },

    // === カテゴリ：確率・統計・直感 ===
    {
      q: "コインを投げて5回連続で「表」が出ました。\n次に投げるとき、「表」と「裏」、どちらが出る確率が高い？",
      options: ["表（勢いがあるから）", "裏（そろそろ出るから）", "確率は同じ（半々）", "分からない"],
      correct: 2,
      explanation: "コインに記憶はありません（独立事象）。確率は常に50%です。"
    },
    {
      q: "「100人に1人がかかる病気」の検査で「陽性」が出ました。\nこの検査は99%正確ですが、健康な人でも1%の確率で間違って「陽性」が出てしまいます。\nあなたが本当に病気である確率は？（直感で答えてください）",
      options: ["99%くらい", "50%くらい", "100%", "低い（50%以下）"],
      correct: 3,
      explanation: "「基準率の誤謬」です。健康な人の母数が大きいため、偽陽性の数が真陽性の数と同程度かそれ以上になり、確率は下がります。"
    },
    {
      q: "宝くじ売り場で「この売り場から1等がたくさん出ています！」と宣伝していました。\nこの売り場で買うと、当たりやすいと言える？",
      options: ["言える。運気が良い場所だから。", "言える。実績があるから。", "言えない。単に販売枚数が多いだけかもしれない。", "言えない。次は出ないから。"],
      correct: 2,
      explanation: "販売数が多い店は当選数も多いですが、1枚あたりの当選確率は変わりません。"
    },
    {
      q: "サイコロを振って「1」が出る確率は1/6です。\n6回振れば、必ず1回は「1」が出る？",
      options: ["必ず出る。", "出ないこともある。", "3回は出る。", "運によるので分からない。"],
      correct: 1,
      explanation: "確率はあくまで見込みです。6回振って一度も出ない確率は約33%もあります。"
    },
    {
      q: "ある野球選手の打率が3割です。\n「今日は既に2回凡退しているから、次の打席は打つ確率が高い」と言える？",
      options: ["言える（確率の収束）。", "言えない。", "調子が悪いので打てない。", "相手投手による。"],
      correct: 1,
      explanation: "ギャンブラーの誤謬です。過去の結果は次の打席の確率に（直接的には）影響しません。"
    },
    {
      q: "平均年収が500万円の会社があります。\n「従業員のほとんどが500万円もらっている」と言える？",
      options: ["言える。", "言えない（一部の高給取りが釣り上げているかも）。", "半分はもらっている。", "だいたい合っている。"],
      correct: 1,
      explanation: "平均値は極端な値に引っ張られます。社長が10億円もらっていれば、他は低賃金でも平均は上がります。"
    },

    // === カテゴリ：認知バイアス・心理 ===
    {
      q: "映画を見に行きましたが、開始30分でとてもつまらないと分かりました。\nチケット代1800円は払ってしまっています。\n損をしないための、最も合理的な判断は？",
      options: ["最後まで見る（元を取るため）", "寝て過ごす", "映画館を出て、好きなことをする", "文句を言いに行く"],
      correct: 2,
      explanation: "サンクコスト（埋没費用）です。お金は戻らないので、時間まで無駄にするのが最大の損です。"
    },
    {
      q: "「あの人はB型だから、性格がマイペースなんだ」と言う人がいます。\nこの考え方の弱点は？",
      options: ["B型でもマイペースじゃない人のことを無視している。", "血液型の分類が間違っている。", "マイペースは良いことだから問題ない。", "科学的に証明されている。"],
      correct: 0,
      explanation: "確証バイアスです。自分の思い込みに合う事例だけを集め、合わない事例を無視しています。"
    },
    {
      q: "「このサプリメントは天然成分100%だから、化学薬品より安全です」という宣伝。\nこれは論理的に正しい？",
      options: ["正しい。天然のものは体に優しい。", "正しい。化学薬品は副作用がある。", "間違い。天然でも毒（トリカブト等）はある。", "間違い。値段が高いから。"],
      correct: 2,
      explanation: "自然に訴える論証です。天然か人工かと、安全かどうかは無関係です。"
    },
    {
      q: "ある議論で、相手が「その意見は間違っている。なぜなら、あなたは昔テストで0点を取ったことがあるからだ」と言いました。\nこの反論は有効？",
      options: ["有効。頭の悪い人の意見は間違うから。", "無効。昔の失敗と、今の意見の正しさは関係ない。", "有効。信頼できないから。", "無効。0点は嘘かもしれないから。"],
      correct: 1,
      explanation: "対人論証（アド・ホミネム）です。主張の中身ではなく、人格を攻撃して論点をずらしています。"
    },
    {
      q: "生存した戦闘機のデータを見ると、翼に弾痕が集中していました。\n撃墜されないために補強すべき場所は？",
      options: ["弾痕が多い「翼」", "弾痕がない「エンジンや操縦席」", "全体を均等に", "分からない"],
      correct: 1,
      explanation: "生存者バイアスです。帰ってこられなかった機体は、弾痕がない箇所（急所）を撃たれたのです。"
    },
    {
      q: "「幽霊がいないことは証明されていない。だから幽霊は存在する」という主張。\nこれは論理的に正しい？",
      options: ["正しい。", "間違い。「分からない」ことは「存在する」理由にならない。", "間違い。幽霊は科学で証明されている。", "正しい。目撃者がいるから。"],
      correct: 1,
      explanation: "悪魔の証明（無知に訴える論証）です。証明されていないことは、存在の証明にはなりません。"
    },
    {
      q: "「私は晴れ男だ。私が旅行に行くといつも晴れる」\nこの人が忘れている可能性が高いのは？",
      options: ["雨が降った旅行のこと。", "旅行に行った回数。", "天気の予報。", "一緒に行った人のこと。"],
      correct: 0,
      explanation: "確証バイアスです。自分の説に合わない「雨の日の記憶」を無意識に忘れています。"
    },
    {
      q: "「みんなが買っているから、これは良い商品に違いない」\nこの心理を何という？",
      options: ["バンドワゴン効果（同調）", "アンカリング効果", "希少性", "一貫性の原理"],
      correct: 0,
      explanation: "多数派の意見や行動に、自分の判断を委ねてしまう心理です。"
    },

    // === カテゴリ：日常の論理 ===
    {
      q: "「成功した人はみんな努力している。だから努力すれば必ず成功する」\nこの理屈は正しい？",
      options: ["正しい。", "間違い。努力しても成功しなかった人が含まれていない。", "間違い。運が必要だから。", "正しい。努力は裏切らない。"],
      correct: 1,
      explanation: "逆は必ずしも真ならず。「成功者⊂努力家」であっても、「努力家＝成功者」ではありません。"
    },
    {
      q: "「私が雨乞いをすると、必ず一ヶ月以内に雨が降る。だから私には雨を降らせる力がある」\nこの主張の問題点は？",
      options: ["一ヶ月は長すぎる。", "雨乞いしなくても、一ヶ月あれば自然に雨は降る。", "雨乞いのやり方が間違っている。", "問題はない。すごい能力だ。"],
      correct: 1,
      explanation: "自然現象（当たり前のこと）を、自分の行動の結果だと誤認しています（前後即因果の誤謬）。"
    },
    {
      q: "アンケートで「あなたは平均より運転が上手いですか？」と聞くと、80%以上の人が「はい」と答える傾向があります。\nこれは何を意味している？",
      options: ["みんな本当に運転が上手い。", "運転免許試験が簡単すぎる。", "多くの人が自分の能力を過大評価している。", "平均の計算が間違っている。"],
      correct: 2,
      explanation: "平均より上なのは本来50%です。自己評価が高くなるバイアス（優越の錯覚）です。"
    },
    {
      q: "「この壺を買えば運気が上がります。買わなかった人は不幸になっています」\nこの商法の論理的な怪しさは？",
      options: ["壺のデザインが悪い。", "「運気」や「不幸」の定義が曖昧で、何とでも言える。", "値段が高すぎる。", "本当に効果があるかもしれない。"],
      correct: 1,
      explanation: "反証不可能です。定義が曖昧な言葉は、後からどうとでも言い訳できます。"
    },
    {
      q: "A「スマホは子供に悪影響だ」\nB「じゃあ、子供から全ての電子機器を取り上げて、原始時代のような生活をさせろと言うのか！」\nBさんの反論の問題点は？",
      options: ["言い方が乱暴。", "Aさんの意見を極端にねじ曲げている。", "原始時代の生活も悪くない。", "スマホは便利だから。"],
      correct: 1,
      explanation: "藁人形論法（ストローマン）です。相手の意見を極端に変形させ、それを攻撃しています。"
    },
    {
      q: "「早起きは三文の徳と言う。だから夜勤の人は損をしている」\nこの理屈は正しい？",
      options: ["正しい。", "間違い。ことわざは科学的な法則ではない。", "間違い。三文は安いから。", "正しい。体内時計が狂うから。"],
      correct: 1,
      explanation: "ことわざや慣用句を、論理的な証拠として扱うことはできません。"
    },
    {
      q: "「私が嘘をついていないことは、友人のCさんが証明してくれる。Cさんは嘘をつかない正直な人だからだ」\nこの説明の弱点は？",
      options: ["Cさんが嘘をつかないという保証がない（循環している）。", "友人は味方をするものだ。", "証明には時間がかかる。", "Cさんを知らないから。"],
      correct: 0,
      explanation: "循環論法です。Cさんが正しいという根拠が示されていません。"
    },

    // === カテゴリ：水平思考・なぞなぞ ===
    {
      q: "トラックの運転手が一方通行の道を逆走していましたが、警察官は彼を止めませんでした。\nなぜ？",
      options: ["警察官が見ていなかった。", "運転手は歩いていた。", "緊急車両だった。", "警察官が知り合いだった。"],
      correct: 1,
      explanation: "「トラックの運転手」という職業の人が、トラックを運転しているとは限りません。"
    },
    {
      q: "ある月には28日あります。その月はどれ？",
      options: ["2月だけ。", "うるう年以外の2月。", "全ての月。", "存在しない。"],
      correct: 2,
      explanation: "どの月にも少なくとも28日はあります。"
    },
    {
      q: "カゴの中にリンゴが5つあります。5人の子供に1つずつ配りましたが、カゴの中にまだリンゴが1つ残っています。\nどうして？",
      options: ["計算間違い。", "1人はカゴごとリンゴをもらった。", "リンゴが増えた。", "1人が食べなかった。"],
      correct: 1,
      explanation: "最後の1人は、リンゴが入ったままのカゴを受け取ったのです。"
    },
    {
      q: "医者が言いました。「あなたは私の息子だが、私はあなたの父親ではない」\n医者は誰？",
      options: ["幽霊", "母親", "祖父", "嘘をついている"],
      correct: 1,
      explanation: "「医者＝男性」という固定観念（バイアス）による引っかけです。"
    },
    {
      q: "水が満杯に入ったコップがあります。こぼさずに、水を底のほうから飲むにはどうすればいい？",
      options: ["ストローを使う。", "凍らせる。", "スポイトを使う。", "逆立ちする。"],
      correct: 0,
      explanation: "物理的な解決策です。"
    },
    {
      q: "何も書かれていない真っ白な紙があります。虫眼鏡で見ると何が見える？",
      options: ["紙の繊維。", "文字。", "何も見えない。", "自分の目。"],
      correct: 0,
      explanation: "「何も書かれていない」だけで、物質としての紙（繊維）は存在します。"
    },
    {
      q: "破れば破るほど、役に立つものは？",
      options: ["約束", "記録", "卵", "沈黙"],
      correct: 2,
      explanation: "卵は殻を割らないと料理に使えません。"
    },
    {
      q: "落ちてくるのに、決して壊れないものは？",
      options: ["雨", "ガラス", "スマホ", "夢"],
      correct: 0,
      explanation: "雨粒は落ちてきますが、「壊れる」という概念が当てはまりません（分裂するだけ）。"
    },
    {
      q: "走っているのに足がなく、唸るのに口がないものは？",
      options: ["風", "川", "車", "幽霊"],
      correct: 0,
      explanation: "比喩表現のなぞなぞです。"
    },
    {
      q: "あなたは暗い部屋にいます。マッチが1本だけあります。\nランプ、ストーブ、ろうそくがあります。最初に何に火をつける？",
      options: ["ランプ", "ストーブ", "ろうそく", "マッチ"],
      correct: 3,
      explanation: "まずマッチ自体に火をつけないと、他には火を移せません。"
    },

    // === カテゴリ：スピリチュアル・商法・疑似科学の見抜き方（新規追加） ===
    {
      q: "占い師が「あなたは過去に、人間関係で深く悩んだことがありますね？」と言い当てました。\nこれはなぜ当たったように感じる？",
      options: ["本当に超能力があるから。", "事前に調査されていたから。", "誰にでも当てはまる曖昧なことを言っているから（バーナム効果）。", "運命だから。"],
      correct: 2,
      explanation: "「人間関係の悩み」は誰にでもあります。誰にでも当てはまることを自分だけの事のように錯覚させる手口です。"
    },
    {
      q: "「量子力学的にお金を増やす」というセミナー。\n科学的な視点での最大の問題点は？",
      options: ["参加費が高いこと。", "量子力学はミクロの世界の物理法則であり、金運とは関係がないこと。", "講師が有名でないこと。", "会場が狭いこと。"],
      correct: 1,
      explanation: "「量子」「波動」「エネルギー」などの科学用語を、本来の意味とは無関係な精神論に悪用する典型的なニセ科学です。"
    },
    {
      q: "「このブレスレットを買わないと、来年あなたの家族に不幸が訪れます」と言われました。\nこれは論理的にどう判断すべき？",
      options: ["怖いので買うべき。", "半額なら買う。", "根拠のない脅し（恐怖に訴える論証）なので無視する。", "家族に相談する。"],
      correct: 2,
      explanation: "恐怖心や不安を煽って正常な判断を奪い、商品を売りつける「霊感商法」の常套手段です。"
    },
    {
      q: "「私のメソッドで効果が出なかった人は一人もいません。効果が出ないとしたら、それはあなたの信じる心が足りないからです」\nこの主張の論理的な罠は？",
      options: ["自信満々で素晴らしい。", "「効果が出ない」という事実を、客側のせいにして無効化している（反証不可能）。", "信じる心は大切だ。", "メソッドが完璧だから。"],
      correct: 1,
      explanation: "反証（効果がないという事実）を「信仰不足」のせいにして切り捨てるため、論理的に無敵の（閉じた）言い訳になっています。"
    },
    {
      q: "「テレビで有名な先生が推奨している健康法だから、絶対に正しいはずだ」\nこの思考に含まれるバイアスは？",
      options: ["権威に訴える論証", "正常性バイアス", "バンドワゴン効果", "ハロー効果"],
      correct: 0,
      explanation: "「誰が言ったか（権威）」と「内容が科学的に正しいか」は全く別の問題です。有名人でも間違ったことを言う可能性はあります。"
    },
    {
      q: "無料の性格診断を受けたら、その後に高額な開運グッズを勧められました。\n断りにくいと感じる心理は？",
      options: ["恐怖心", "返報性の原理（お返しをしないといけない）", "サンクコスト", "一貫性の原理"],
      correct: 1,
      explanation: "「無料で親切にしてもらった」という負い目（借り）を利用して、断りにくい状況を作る手口です。"
    },
    {
      q: "「科学では解明できないこともある。だからこの奇跡の水は本物だ」\nこの論理の誤りは？",
      options: ["科学は万能ではないから正しい。", "「科学で分からない」ことは「奇跡の水が本物である」証拠にはならない（無知への訴え）。", "水は体に良いから。", "値段による。"],
      correct: 1,
      explanation: "科学の限界を指摘しても、その特定の商品が本物であるという証明にはなりません。論理の飛躍です。"
    },
    {
      q: "投資詐欺で「元本保証で月利20%」という話が来ました。\nまず疑うべき論理的な理由は？",
      options: ["担当者の愛想が良すぎる。", "リスクとリターンは比例する原則に反している（ローリスク・ハイリターンは存在しない）。", "月利20%は少なすぎる。", "パンフレットが綺麗だから。"],
      correct: 1,
      explanation: "経済の基本原則として、高いリターンには必ず高いリスクが伴います。「絶対に損しない（元本保証）」で「大儲け」は詐欺のシグナルです。"
    },
    {
      q: "「ありがとう」と書いた紙を貼った水は結晶が綺麗になる、という話。\n科学的な検証に必要なのは？",
      options: ["もっと綺麗な字で書く。", "「バカヤロー」と書いた水と比較し、かつ書いた内容を知らない人が判定する（二重盲検法）。", "信じて祈る。", "顕微鏡を良くする。"],
      correct: 1,
      explanation: "観察者の思い込み（バイアス）を排除するため、誰がどの水か分からない状態で判定する必要があります。"
    },
    {
      q: "マルチ商法で「権利収入で一生遊んで暮らせる」と勧誘されました。\n数学的な視点での矛盾は？",
      options: ["遊んで暮らすのは良くない。", "会員が増え続けると、すぐに世界人口を超えてしまい、下位層は必ず損をする仕組みだから。", "商品が高いから。", "友達をなくすから。"],
      correct: 1,
      explanation: "ねずみ講的なシステムは指数関数的に人数が必要になるため、後から入った人は物理的に勧誘相手がいなくなり、必ず破綻します。"
    },
    {
      q: "「好転反応」という言葉を使って、「商品を使って体調が悪化したのは、毒素が出ている証拠だ」と説明されました。\nこの説明の危険性は？",
      options: ["毒素が出るのは良いことだ。", "副作用やアレルギー反応などの「危険信号」を無視させてしまう。", "もっと使い続ければ治る。", "言葉の響きが良い。"],
      correct: 1,
      explanation: "体調不良を「良くなる前兆」と言いくるめることで、被害の発覚を遅らせ、使用を続けさせる危険なレトリックです。"
    },
    {
      q: "霊能者が、事前にスタッフを使って客の情報を調べておき、それをさも透視したかのように話す手口を何という？",
      options: ["コールドリーディング", "ホットリーディング", "マインドリーディング", "スピードリーディング"],
      correct: 1,
      explanation: "事前の下調べ（ホット）に基づいたトリックです。何もなしで会話から探るのはコールドリーディングです。"
    },
    {
      q: "「100万円のセミナーに入れば、人生が変わります。お金は後からついてきます」\n支払った後、内容が薄くても辞められない心理は？",
      options: ["サンクコスト（埋没費用）への執着。", "学習意欲。", "講師への愛。", "金運が上がったから。"],
      correct: 0,
      explanation: "「高いお金を払ったのだから、無駄だったと認めたくない」という心理が働き、さらに深みにハマってしまいます。"
    },
    {
      q: "「波動が高い人だけが、この真実に気づけます」と言われました。\nこの言葉の狙いは？",
      options: ["本当に選ばれた人を探している。", "「自分は特別だ」という選民意識をくすぐり、批判的な意見を遮断させる（カルト的囲い込み）。", "波動を測定したい。", "真実を広めたい。"],
      correct: 1,
      explanation: "批判する人を「波動が低い（分かっていない）人」と定義することで、外部からの忠告を聞かなくさせる手口です。"
    },
    {
      q: "SNSで「現金配布企画」を見つけました。参加条件はフォローとRTです。\n主催者の本当の目的として最も可能性が高いのは？",
      options: ["お金が余って困っている。", "善意で世の中を良くしたい。", "フォロワーを集めてアカウントを高値で売る、または個人情報を集める（カモリスト作成）。", "税金対策。"],
      correct: 2,
      explanation: "「楽して儲けたい」と考える人のリスト（カモリスト）は、詐欺業者にとって高値で取引される資産になります。"
    },
    {
      q: "「宇宙エネルギーを注入したシール」を電化製品に貼ると性能が上がると言われました。\n物理学的な視点は？",
      options: ["宇宙エネルギーは未知なのであり得る。", "「エネルギー」の定義が物理学と異なり、客観的な測定も原理説明もなされていない。", "シールが可愛いから良い。", "電気が綺麗になる。"],
      correct: 1,
      explanation: "科学用語を使っていますが、測定不可能な独自の定義であり、物理的効果は証明されていません。"
    },
    {
      q: "「アインシュタインもこう言った」という名言が引用されました。\n注意すべき点は？",
      options: ["アインシュタインは天才だから正しい。", "その名言が本当にアインシュタインの発言か、文脈がねじ曲げられていないか確認する。", "物理学者は哲学も詳しい。", "感動すれば嘘でもいい。"],
      correct: 1,
      explanation: "偉人の威光を借りるために、発言を捏造したり、都合よく解釈したりするケースが多々あります。"
    },
    {
      q: "「絶対に儲かる」という投資話を、赤の他人があなたに教える合理的な理由は？",
      options: ["あなたが特別だから。", "親切心。", "教える側にメリット（紹介料や詐欺）があるから。本当に儲かるなら他人には教えない。", "運命の出会いだから。"],
      correct: 2,
      explanation: "本当に確実に儲かるなら、自分で借金してでも投資します。他人に教えるのは、他人のお金が必要だからです。"
    },
    {
      q: "セミナー会場で、サクラを使って「すごい！」「治った！」と拍手喝采を起こす手法。\nこれはどの心理効果を狙っている？",
      options: ["同調圧力（バンドワゴン効果）", "プラシーボ効果", "吊り橋効果", "カタルシス効果"],
      correct: 0,
      explanation: "「周りがみんな認めているのだから、疑っている自分がおかしいのかも」と思わせる集団心理の操作です。"
    },
    {
      q: "「まだ科学が追いついていないだけ」という言い訳。\nこれを信じてはいけない理由は？",
      options: ["科学は進歩しているから。", "現時点で証拠がないものを「ある」と主張するのは、詐欺師の常套句だから。", "未来になれば分かる。", "ロマンがあるから。"],
      correct: 1,
      explanation: "「未知であること」は「嘘をついていい理由」にはなりません。現時点で効果が証明されていないなら、効果効能を謳ってはいけません。"
    },
    {
      q: "「この健康食品でガンが治った」という体験談。\n統計的な問題点は？",
      options: ["治らなかった人の声（死人に口なし）が含まれていない（生存者バイアス）。", "個人の感想だから問題ない。", "嘘をついている。", "ガンは自然に治ることもある。"],
      correct: 0,
      explanation: "たまたま治った数人の声だけを大きく取り上げ、効果がなくて亡くなった多数のデータを無視しています。"
    },
    {
      q: "「運気を上げるために、部屋の西側に黄色い物を置きましょう」\nこれを実行して良いことが起きた場合、論理的な説明は？",
      options: ["風水の力が証明された。", "黄色は金運の色だから。", "偶然、または「良いこと」を意識して探すようになったから（カラーバス効果・確証バイアス）。", "西側に神様がいるから。"],
      correct: 2,
      explanation: "何かを行うと、脳はその効果を探そうとします。日常の些細な良いことを「風水のおかげ」と関連付けているだけです。"
    },
    {
      q: "「あなたは純粋すぎるから、悪い霊に狙われやすい」と言われました。\nこの言葉の裏にあるテクニックは？",
      options: ["本当に心配してくれている。", "「純粋」と褒めることで信頼させつつ、「狙われている」と恐怖を植え付ける（マッチポンプ）。", "霊視能力がすごい。", "お祓いが必要だ。"],
      correct: 1,
      explanation: "褒めて心を開かせ、その後に恐怖を与えて依存させる。洗脳や詐欺の基本的な導入テクニックです。"
    },
    {
      q: "「このセミナーの内容は口外禁止です。家族にも話してはいけません」\nなぜ口止めするのか？",
      options: ["秘伝の奥義だから。", "冷静な第三者に相談されると、詐欺だとバレて止められてしまうから。", "著作権があるから。", "価値が下がるから。"],
      correct: 1,
      explanation: "被害者を孤立させ、客観的な意見を遮断することで、洗脳状態を維持しようとしています。"
    },
    {
      q: "「思考は現実化する。だから成功できないのは、あなたの思考がネガティブだからだ」\nこの主張の問題点は？",
      options: ["ポジティブシンキングは大切だ。", "環境や運などの外部要因を無視し、全てを個人の責任に帰結させる（自己責任論の悪用）。", "思考のエネルギーは強い。", "成功者はみんなポジティブだから。"],
      correct: 1,
      explanation: "構造的な問題や不運まで個人の内面のせいにすることで、搾取を正当化し、被害者に罪悪感を植え付けます。"
    },
    {
      q: "「このパワーストーンを持てば、宝くじが当たります」\nもし外れた場合、業者は何と言うでしょう？",
      options: ["返金します。", "石の浄化が足りなかった、あるいはもっと強い石が必要だと言う（追加購入の誘導）。", "謝罪する。", "店をたたむ。"],
      correct: 1,
      explanation: "結果が出ない原因を客側に転嫁し、さらに高額な商品を売りつけるのが霊感商法のパターンです。"
    },
    {
      q: "「人工地震だ」「陰謀だ」と主張する動画。\n信じる前に確認すべきことは？",
      options: ["再生数が多いか。", "コメント欄でみんなが賛同しているか。", "信頼できる複数の情報源（一次ソースや専門機関）が裏付けているか。", "音楽が怖いか。"],
      correct: 2,
      explanation: "SNSの再生数やコメントは操作可能です。客観的なデータや専門家の見解と照らし合わせるのがリテラシーです。"
    },
    {
      q: "「私は神の声を聴いた」という教祖。\n論理的にどう扱うべき？",
      options: ["すごい人だ。", "証明不可能であり、個人の主観的体験に過ぎない（客観的事実ではない）。", "神はいるかもしれない。", "寄付をする。"],
      correct: 1,
      explanation: "主観的な体験は本人にとっては真実かもしれませんが、他人にとっての客観的な真実（従うべき根拠）にはなりません。"
    },
    {
      q: "「デトックス（解毒）」を謳う健康法。\n医学的な事実は？",
      options: ["体には毒が溜まっている。", "人間の肝臓と腎臓が既に高度な解毒機能を持っており、怪しいジュースや足裏シートは不要。", "汗から毒が出る。", "宿便を取るべき。"],
      correct: 1,
      explanation: "「毒素」という曖昧な言葉で不安を煽っていますが、健康な人体には元々優秀な排毒システムが備わっています。"
    },
    {
      q: "「二極化する世界」「目覚めた人」という言葉で危機感を煽るメッセージ。\n目的は？",
      options: ["世界平和のため。", "焦燥感を煽り、自分のグループに所属しないと取り残されると思わせる（囲い込み）。", "予言が当たっている。", "次元上昇するため。"],
      correct: 1,
      explanation: "「こっち側（目覚めた側）」と「あっち側（眠っている側）」に分断し、帰属意識と優越感を刺激して依存させます。"
    }
  ];

  // App Logic (Same as v18)
  const app = {
    questions: [],
    currentIdx: 0,
    score: 0,
    userAnswers: [],
    isProcessing: false,
    rankResult: "", 

    init: function() {
      document.getElementById('btn-start').addEventListener('click', () => this.start());
      document.getElementById('btn-restart').addEventListener('click', () => this.reset());
      document.getElementById('share-link').addEventListener('click', (e) => this.shareToX(e));
    },

    start: function() {
      // Fisher-Yates Shuffle
      const pool = [...questionPool];
      for (let i = pool.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [pool[i], pool[j]] = [pool[j], pool[i]];
      }
      
      this.questions = pool.slice(0, 5);
      this.currentIdx = 0;
      this.score = 0;
      this.userAnswers = [];
      this.isProcessing = false;
      this.rankResult = "";

      this.switchView('view-quiz');
      setTimeout(() => this.renderQuestion(), 100);
    },

    reset: function() {
      this.switchView('view-intro');
    },

    switchView: function(id) {
      document.querySelectorAll('.view').forEach(el => {
        el.classList.remove('active');
        if (el.id !== id) setTimeout(() => el.style.display = 'none', 300);
      });
      const target = document.getElementById(id);
      target.style.display = 'block';
      void target.offsetWidth;
      target.classList.add('active');
    },

    renderQuestion: function() {
      const qData = this.questions[this.currentIdx];
      const content = document.getElementById('quiz-content');
      
      content.classList.remove('fading-out');
      
      const progress = (this.currentIdx / this.questions.length) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      document.getElementById('question-meta').textContent = `Q${this.currentIdx + 1} / 5`;
      document.getElementById('question-text').textContent = qData.q;

      const optsContainer = document.getElementById('options-container');
      optsContainer.innerHTML = '';

      const optionsWithIdx = qData.options.map((opt, i) => ({ text: opt, originalIdx: i }));
      optionsWithIdx.sort(() => 0.5 - Math.random());

      optionsWithIdx.forEach((optObj) => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = optObj.text;
        btn.addEventListener('click', (e) => this.handleAnswer(optObj.originalIdx, e.target));
        optsContainer.appendChild(btn);
      });

      this.isProcessing = false;
    },

    handleAnswer: function(originalChoiceIdx, btnEl) {
      if (this.isProcessing) return;
      this.isProcessing = true;

      btnEl.classList.add('selected');
      document.querySelectorAll('.btn').forEach(b => {
        if (b !== btnEl) b.classList.add('disabled');
      });

      const qData = this.questions[this.currentIdx];
      const isCorrect = (originalChoiceIdx === qData.correct);
      
      if (isCorrect) this.score++;
      
      this.userAnswers.push({
        question: qData,
        isCorrect: isCorrect
      });

      setTimeout(() => {
        if (this.currentIdx < this.questions.length - 1) {
          document.getElementById('quiz-content').classList.add('fading-out');
          this.currentIdx++;
          setTimeout(() => this.renderQuestion(), 300);
        } else {
          this.showResult();
        }
      }, 600);
    },

    showResult: function() {
      this.switchView('view-result');
      
      const percentage = (this.score / this.questions.length) * 100;
      document.getElementById('score-display').textContent = `${this.score}/5`;
      
      let rank, msg;
      if (percentage === 100) {
        rank = "RANK S";
        msg = "完璧です。あなたの論理回路は極めてクリアで、バイアスに惑わされていません。";
      } else if (percentage >= 80) {
        rank = "RANK A";
        msg = "素晴らしい思考力です。論理的な推論が正確に機能しています。";
      } else if (percentage >= 60) {
        rank = "RANK B";
        msg = "標準的です。直感に頼らず、一歩踏み込んで考える癖をつけましょう。";
      } else {
        rank = "RANK C";
        msg = "直感や感情が先行しがちです。「なぜそう言えるのか？」を問う練習を推奨します。";
      }

      this.rankResult = rank;
      document.getElementById('rank-display').textContent = rank;
      document.getElementById('feedback-text').textContent = msg;

      const list = document.getElementById('review-list');
      list.innerHTML = '';
      
      this.userAnswers.forEach((ans, i) => {
        const item = document.createElement('div');
        item.className = `review-item ${ans.isCorrect ? 'correct' : 'incorrect'}`;
        item.innerHTML = `
          <div class="review-header">
            <span>Q${i+1}</span>
            <span class="status-label ${ans.isCorrect ? 'correct' : 'incorrect'}">${ans.isCorrect ? '正解' : '不正解'}</span>
          </div>
          <div class="review-q">${ans.question.q}</div>
          <div class="review-exp"><strong>解説：</strong>${ans.question.explanation}</div>
        `;
        list.appendChild(item);
      });

      this.updateShareLink();
    },

    shareToX: function(e) {
      const text = `論理的思考力診断ゲームで【${this.rankResult}】を獲得しました。\n正解数: ${this.score}/5問\n\n知識不要の地頭力テストに挑戦しよう。`;
      let currentUrl = window.location.href;
      if (!currentUrl.startsWith('http')) currentUrl = 'https://rhyn.jp/logic-test.html';
      const hashtags = "論理的思考力診断,地頭力";
      const intentUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(currentUrl)}&hashtags=${encodeURIComponent(hashtags)}`;
      
      if (e && (e.target.getAttribute('href') === "#" || !e.target.getAttribute('href'))) {
          e.preventDefault();
          window.open(intentUrl, '_blank');
      }
    },

    updateShareLink: function() {
      const text = `論理的思考力診断ゲームで【${this.rankResult}】を獲得しました。\n正解数: ${this.score}/5問\n\n知識不要の地頭力テストに挑戦しよう。`;
      let currentUrl = window.location.href;
      if (!currentUrl.startsWith('http')) currentUrl = 'https://rhyn.jp/logic-test.html';
      const hashtags = "論理的思考力診断,地頭力";
      const intentUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(currentUrl)}&hashtags=${encodeURIComponent(hashtags)}`;
      
      const linkEl = document.getElementById('share-link');
      if (linkEl) linkEl.href = intentUrl;
    }
  };

  document.addEventListener('DOMContentLoaded', () => {
    app.init();
  });

})();
</script>

</body>
</html>
